<idea-plugin>
  <id>io.bazbom.intellij</id>
  <name>BazBOM Security Scanner</name>
  <vendor email="support@bazbom.io" url="https://bazbom.io">BazBOM</vendor>

  <description><![CDATA[
    Real-time vulnerability scanning for Java projects using Maven, Gradle, or Bazel.
    
    <h2>Features</h2>
    <ul>
      <li>Dependency tree visualization with security status</li>
      <li>Inline vulnerability warnings in pom.xml, build.gradle, BUILD.bazel</li>
      <li>One-click quick fixes to upgrade vulnerable dependencies</li>
      <li>Automated testing after fixes</li>
      <li>Privacy-first: All scanning happens locally</li>
      <li>SLSA Level 3 provenance support</li>
    </ul>
    
    <h2>Requirements</h2>
    <ul>
      <li>BazBOM CLI must be installed and in PATH</li>
      <li>Advisory database synced: bazbom db sync</li>
    </ul>
  ]]></description>

  <depends>com.intellij.modules.platform</depends>
  <depends>com.intellij.modules.java</depends>
  <depends>org.jetbrains.plugins.gradle</depends>
  <depends>org.jetbrains.idea.maven</depends>

  <extensions defaultExtensionNs="com.intellij">
    <!-- Tool Window for dependency tree -->
    <toolWindow id="BazBOM" anchor="right"
                factoryClass="io.bazbom.intellij.toolwindow.BazBomToolWindowFactory"
                icon="/icons/bazbom-16.svg"/>

    <!-- Settings panel -->
    <projectConfigurable parentId="tools"
                         instance="io.bazbom.intellij.settings.BazBomConfigurable"
                         id="io.bazbom.settings"
                         displayName="BazBOM"/>
    
    <!-- Project service for caching -->
    <projectService serviceImplementation="io.bazbom.intellij.services.BazBomProjectService"/>
    
    <!-- Annotators for real-time vulnerability highlighting -->
    <annotator language="XML" implementationClass="io.bazbom.intellij.annotator.MavenDependencyAnnotator"/>
  </extensions>

  <actions>
    <action id="BazBOM.ScanProject"
            class="io.bazbom.intellij.actions.ScanProjectAction"
            text="Scan with BazBOM"
            description="Run BazBOM security scan on current project"
            icon="/icons/bazbom-16.svg">
      <add-to-group group-id="ToolsMenu" anchor="last"/>
    </action>
    
    <action id="BazBOM.SyncDatabase"
            class="io.bazbom.intellij.actions.SyncDatabaseAction"
            text="Sync BazBOM Advisory Database"
            description="Update local vulnerability database">
      <add-to-group group-id="ToolsMenu" anchor="last"/>
    </action>
  </actions>

  <projectListeners>
    <listener class="io.bazbom.intellij.listeners.BazBomProjectListener"
              topic="com.intellij.openapi.project.ProjectManagerListener"/>
  </projectListeners>
</idea-plugin>
